{% extends "layout.twig" %}

{% block content %}
  <style>
    /* Make the body take full viewport height */
    html, body {
      height: 100%;
    }
    #main {
      display: flex !important;
      flex-direction: column !important;
      min-height: 100vh !important;
    }
    .login-wrapper {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      width: 100%;
    }
  </style>

  <div class="login-wrapper">
    <!-- ====================================================================
      view.login2fa
      -->
    <div class="container content">
      <div class="row">
        <div class="col-lg-3"></div>
        <div class="col-lg-6">
          {% if showAlert and (showAlerts != 'none') %}
            {% if (showAlerts == 'all') or (showAlerts == 'warnings' and (alertData.type == 'warning' or alertData.type == 'danger')) %}
              {{ createAlertBox(alertData)|raw }}
            {% endif %}
          {% endif %}

          {{ resetTabindex() }}
          {% set colsleft = 5 %}
          {% set colsright = 7 %}
          {% set paddingBottom = "12px" %}

          <div class="card">
            {# <div class="card-header text-bg-primary">
              <div class="text-center mb-3">
                <i class="bi-calendar-week" style="font-size: 3rem;"></i>
                <div class="h3 fw-bold mt-2">{{ constant('APP_NAME') }}</div>
              </div>
              <i class="fas fa-user-lock fa-lg me-3"></i>
              {{ LANG.login_authcode }}
            </div> #}

            <div class="card-header text-bg-{{ CONF.controllers[controller].panelColor }}">
              <div class="d-flex justify-content-center align-items-center gap-2 mb-3">
                <i class="bi-calendar-week logo-gradient me-2" style="font-size: 3rem;"></i>
                <span class="h3 fw-bold m-0">{{ constant('APP_NAME') }}</span>
              </div>
              <i class="fas fa-user-lock fa-lg me-3"></i>
              {{ LANG.login_authcode }}
            </div>

            <div class="card-body">
              <div class="col-lg-12">
                <form id="login2fa" action="index.php?action=login2fa" method="post" target="_self" name="login2faform" accept-charset="utf-8">
                  <input name="csrf_token" type="hidden" value="{{ csrf_token }}">
                  <fieldset>
                    <div class="form-group row mb-3" style="padding-bottom: {{ paddingBottom }};">
                      <label for="totp" class="col-lg-{{ colsleft }} control-label">{{ LANG.login_authcode }}</label>
                      <div class="col-lg-{{ colsright }}">
                        <input id="totp" class="form-control" tabindex="{{ nextTabindex() }}" name="totp" type="text" minlength="6" maxlength="6" pattern="^[0-9]{6}$" required autofocus autocomplete="one-time-code">
                      </div>
                    </div>
                    <div class="form-group row">
                      <label for="inputSubmit" class="col-lg-{{ colsleft }} control-label"></label>
                      <div class="col-lg-{{ colsright }}">
                        <button type="submit" class="btn btn-primary" tabindex="{{ nextTabindex() }}" name="submit">{{ LANG.btn_login }}</button>
                        <a href="index.php?action=login" class="btn btn-secondary float-end" tabindex="{{ nextTabindex() }}">{{ LANG.btn_back|default('Back') }}</a>
                      </div>
                    </div>
                  </fieldset>
                </form>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-3"></div>
      </div>
    </div>
  </div>
{% endblock %}
