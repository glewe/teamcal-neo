{% extends "layout.twig" %}

{% block content %}
  <!-- ====================================================================
    view.passwordrequest
    -->
  <div class="container content">
    <div class="row">

      <div class="col-lg-3"></div>

      <div class="col-lg-6">

        {% if showAlert and showAlerts != "none" and (showAlerts == "all" or (showAlerts == "warnings" and (alertData.type == "warning" or alertData.type == "danger"))) %}
          {{ createAlertBox(alertData)|raw }}
        {% endif %}

        {% set tabindex = 0 %}
        {% set colsleft = 4 %}
        {% set colsright = 8 %}
        {% set paddingBottom = "36px" %}

        <div class="card">
          <div class="card-header text-bg-{{ CONF.controllers[controller].panelColor }}">
            <i class="{{ CONF.controllers[controller].faIcon }} fa-lg me-3"></i>
            {{ LANG.pwdreq_title }}
            {% if C.read('pageHelp') %}
              <a href="{{ CONF.controllers[controller].docurl }}" target="_blank" class="float-end" style="color:inherit;">
                <i class="bi bi-question-circle-fill bi-lg"></i>
              </a>
            {% endif %}
          </div>
          <div class="card-body">
            <div class="col-lg-12">
              <form id="login" action="index.php?action={{ controller }}" method="post" target="_self" name="loginform" accept-charset="utf-8">
                <input name="csrf_token" type="hidden" value="{{ csrf_token }}">
                <fieldset>
                  <div class="form-group row" style="padding-bottom: {{ paddingBottom }};">
                    <label class="col-lg-{{ colsleft }} control-label">{{ LANG.pwdreq_email }}</label>
                    <div class="col-lg-{{ colsright }}">
                      {% set tabindex = tabindex + 1 %}
                      <input id="inputUsername" class="form-control" autofocus="autofocus" tabindex="{{ tabindex }}" name="txt_email" type="text" value="{{ email }}">
                    </div>
                  </div>
                  <div class="form-group row">
                    <div class="col-lg-12">
                      {{ LANG.pwdreq_email_comment|raw }}
                    </div>
                  </div>

                  {% if multipleUsers %}
                    <div class="divider">
                      <hr>
                    </div>
                    <div class="form-group row">
                      <div class="col-lg-12">
                        <label class="control-label">{{ LANG.pwdreq_selectUser }}</label><br>
                        {{ LANG.pwdreq_selectUser_comment|raw }}
                      </div>
                      <div class="col-lg-12">
                        {% for usr in pwdUsers %}
                          {% set tabindex = tabindex + 1 %}
                          <div class="form-check">
                            <label><input class="form-check-input" name="opt_user" value="{{ usr.username }}" tabindex="{{ tabindex }}" type="radio">{{ usr.username }}</label>
                          </div>
                        {% endfor %}
                      </div>
                    </div>
                  {% endif %}

                  <div class="form-group row">
                    <div class="col-lg-12">
                      {% set tabindex = tabindex + 1 %}
                      <button type="submit" class="btn btn-secondary" tabindex="{{ tabindex }}" name="btn_request_password">{{ LANG.btn_reset_password }}</button>
                    </div>
                  </div>
                </fieldset>
              </form>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-3"></div>

    </div>
  </div>
{% endblock %}
