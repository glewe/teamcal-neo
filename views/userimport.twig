{% extends "layout.twig" %}
{% import "macros/form.twig" as macros %}

{% block content %}
  <!-- ====================================================================
    view.userimport
    -->
  <div class="container content">

    <div class="col-lg-12">
      {% if showAlert and showAlerts != "none" and (showAlerts == "all" or (showAlerts == "warnings" and (alertData.type == "warning" or alertData.type == "danger"))) %}
        {{ createAlertBox(alertData)|raw }}
      {% endif %}

      {% set tabindex = 0 %}
      {% set colsleft = 6 %}
      {% set colsright = 6 %}

      <form class="form-control-horizontal" enctype="multipart/form-data" action="index.php?action={{ controller }}" method="post" target="_self" accept-charset="utf-8">
        <input name="csrf_token" type="hidden" value="{{ csrf_token }}">

        <div class="card">
          <div class="card-header text-bg-{{ CONF.controllers[controller].panelColor }}">
            <i class="{{ CONF.controllers[controller].faIcon }} fa-lg me-3"></i>
            {{ LANG.imp_title }}
            {% if C.read('pageHelp') %}
              <a href="{{ CONF.controllers[controller].docurl }}" target="_blank" class="float-end" style="color:inherit;">
                <i class="bi bi-question-circle-fill bi-lg"></i>
              </a>
            {% endif %}
          </div>
          <div class="card-body">

            <div class="form-group row">
              <label class="col-lg-{{ colsleft }} control-label">
                {{ LANG.imp_file }}<br>
                <span class="text-normal">{{ LANG.imp_file_comment|format(upl_maxsize / 1024, upl_formats, constant('APP_UPL_DIR'))|raw }}</span>
              </label>
              <div class="col-lg-{{ colsright }}">
                <input type="hidden" name="MAX_FILE_SIZE" value="{{ upl_maxsize }}"><br>
                {% set tabindex = tabindex + 1 %}
                <input class="form-control" tabindex="{{ tabindex }}" name="file_image" type="file"><br>
              </div>
            </div>
            <div class="divider">
              <hr>
            </div>

            {% for formObject in import %}
              {% set tabindex = tabindex + 1 %}
              {{ macros.form_group(formObject, colsleft, colsright, tabindex) }}
            {% endfor %}

            <div class="mt-4 text-end">
              {% set tabindex = tabindex + 1 %}
              <button type="submit" class="btn btn-primary me-2" tabindex="{{ tabindex }}" name="btn_import">{{ LANG.btn_import }}</button>
              {% if allowUserAccount %}
                {% set tabindex = tabindex + 1 %}
                <a href="index.php?action=userlist" class="btn btn-secondary float-end" tabindex="{{ tabindex }}">{{ LANG.btn_user_list }}</a>
              {% endif %}
            </div>

          </div>
        </div>

      </form>
    </div>
  </div>
{% endblock %}
